<!DOCTYPE html>
<html>
<head>
    <!-- Metas -->
    <meta charset="utf-8">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <title>Demo</title>
    <script src="../build/nzym.js"></script>
</head>
<body>
    <script src="../build/examples/gettingStarted.js"></script>
    <script src="../examples/verletPhysics.js"></script>
    <script src="../examples/loadingScene.js"></script>
    <script>
        let currentEngineName = '';
        const updateButtons = () => {
            let prevEngineName = '-';
            let nextEngineName = '-';
            const startPrevButton = document.getElementById('start-prev-button');
            const startNextButton = document.getElementById('start-next-button');
            const options = document.getElementById('example-select').options;
            for (let i = 0; i < options.length; i++) {
                if (options[i].selected) {
                    if (i > 0) {
                        prevEngineName = options[i - 1].innerHTML;
                    }
                    if (i < options.length - 1) {
                        nextEngineName = options[i + 1].innerHTML;
                    }
                }
            }
            startPrevButton.innerHTML = `Start Previous (${prevEngineName})`;
            startNextButton.innerHTML = `Start Next (${nextEngineName})`;
        };
        const callEngineMethod = (methodName) => {
            const engineName = document.getElementById('example-select').value;
            if (engineName !== currentEngineName && window['Engine']) {
                if (window['Engine'].stop instanceof Function) {
                    window['Engine'].stop();
                }
            }

            currentEngineName = engineName;

            const engine = Example[currentEngineName];
            engine.makeGlobalAliases();
            engine[methodName]();
        };
        const startPrev = () => {
            const options = document.getElementById('example-select').options;
            for (let i = 1; i < options.length; i++) {
                if (options[i].selected) {
                    options[i].selected = false;
                    options[i - 1].selected = true;
                    callEngineMethod('start');
                    updateButtons();
                    break;
                }
            }
        };
        const startNext = () => {
            const options = document.getElementById('example-select').options;
            for (let i = 0; i < options.length - 1; i++) {
                if (options[i].selected) {
                    options[i].selected = false;
                    options[i + 1].selected = true;
                    callEngineMethod('start');
                    updateButtons();
                    break;
                }
            }
        };
    </script>
    <div>
        <select id="example-select">
            <option value="gettingStarted">1: Getting Started</option>
            <option value="verletPhysics">2: Verlet Physics</option>
            <option value="loadingScene">3: Loading Scene</option>
        </select>
        <button onclick="callEngineMethod('start')">Start</button>
        <button onclick="callEngineMethod('stop')">Stop</button>
        <button onclick="callEngineMethod('restart')">Restart</button>
        <button onclick="callEngineMethod('pause')">Pause</button>
        <button onclick="callEngineMethod('resume')">Resume</button>
        <button onclick="callEngineMethod('run')">Run</button>
        <button id="start-prev-button" onclick="startPrev()">Start Previous (-)</button>
        <button id="start-next-button" onclick="startNext()">Start Next (-)</button>
    </div>
    <script>
        updateButtons();
    </script>
</body>
</html>